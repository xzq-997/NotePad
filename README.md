# MyNotePad - Androidè®°äº‹æœ¬åº”ç”¨

<p align="center">
  <b>ä¸€ä¸ªåŠŸèƒ½å®Œå–„ã€ç•Œé¢ç¾è§‚çš„Androidè®°äº‹æœ¬åº”ç”¨</b><br>
  <i>ç®€æ´ Â· é«˜æ•ˆ Â· å®ç”¨</i>
</p>

---

## ğŸ“± é¡¹ç›®æ¦‚è¿°
**MyNotePad** æ˜¯ä¸€æ¬¾åŠŸèƒ½å®Œå–„çš„Androidè®°äº‹æœ¬åº”ç”¨ï¼Œé›†æˆäº†ç¬”è®°ç®¡ç†ã€æ™ºèƒ½æœç´¢ã€ä¸»é¢˜åˆ‡æ¢ã€åˆ†ç±»ç®¡ç†ç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œé‡‡ç”¨åŸç”ŸAndroidå¼€å‘ï¼Œä¸ºç”¨æˆ·æä¾›é«˜æ•ˆä¾¿æ·çš„ç¬”è®°è®°å½•å’Œç®¡ç†ä½“éªŒã€‚

---

## ğŸ“‹ ç›®å½•
1. [é¡¹ç›®è®¾è®¡æ€è·¯](#1-é¡¹ç›®è®¾è®¡æ€è·¯)
2. [é¡¹ç›®åŠŸèƒ½å®ç°](#2-é¡¹ç›®åŠŸèƒ½å®ç°)
3. [å…³é”®æŠ€æœ¯ç»†èŠ‚](#3-å…³é”®æŠ€æœ¯ç»†èŠ‚)
4. [é¡¹ç›®äº®ç‚¹å’Œæ‰©å±•æ–¹å‘](#4-é¡¹ç›®äº®ç‚¹å’Œæ‰©å±•æ–¹å‘)
---

## ä¸€. é¡¹ç›®è®¾è®¡æ€è·¯

### ğŸ¯ æ ¸å¿ƒç›®æ ‡
æ‰“é€ ä¸€ä¸ª**è½»é‡åŒ–ã€åŠŸèƒ½å®ç”¨ã€ç•Œé¢ç¾è§‚**çš„è®°äº‹æœ¬åº”ç”¨ï¼Œé‡ç‚¹è§£å†³ç”¨æˆ·æ—¥å¸¸è®°å½•çš„ä¾¿æ·æ€§å’Œç®¡ç†æ•ˆç‡é—®é¢˜ã€‚

### ğŸ“Š ç”¨æˆ·éœ€æ±‚åˆ†æ
- **å¿«é€Ÿè®°å½•éœ€æ±‚**ï¼šç®€åŒ–æ“ä½œæµç¨‹ï¼Œæ”¯æŒå¿«é€Ÿåˆ›å»ºå’Œç¼–è¾‘ç¬”è®°
- **é«˜æ•ˆç®¡ç†éœ€æ±‚**ï¼šæä¾›æœç´¢ã€åˆ†ç±»ã€æ’åºåŠŸèƒ½ï¼Œä¾¿äºå¤§é‡ç¬”è®°ç®¡ç†
- **ä¸ªæ€§åŒ–éœ€æ±‚**ï¼šæ”¯æŒç•Œé¢ä¸»é¢˜å®šåˆ¶ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
- **æ•°æ®å®‰å…¨éœ€æ±‚**ï¼šç¡®ä¿ç¬”è®°æ•°æ®çš„æœ¬åœ°å­˜å‚¨å®‰å…¨

### ğŸ› ï¸ æŠ€æœ¯é€‰å‹
| æŠ€æœ¯ç»„ä»¶ | é€‰å‹ç†ç”± | ä¼˜åŠ¿ |
|---------|---------|------|
| **ContentProvider** | æ•°æ®å…±äº«ä¸å°è£… | å®‰å…¨è®¿é—®ã€æ ‡å‡†æ¥å£ |
| **CursorAdapter** | æ•°æ®ç»‘å®š | é«˜æ•ˆåˆ—è¡¨å±•ç¤ºã€è‡ªåŠ¨æ›´æ–° |
| **Material Design** | è®¾è®¡è§„èŒƒ | ç»Ÿä¸€ç•Œé¢ã€è‰¯å¥½ä½“éªŒ |

---

## äºŒ. é¡¹ç›®åŠŸèƒ½å®ç°

### â° æ—¶é—´æˆ³åŠŸèƒ½
**åŠŸèƒ½æè¿°**ï¼šæ¯æ¡ç¬”è®°è‡ªåŠ¨è®°å½•åˆ›å»ºå’Œä¿®æ”¹æ—¶é—´ï¼Œæ”¯æŒå¤šç§æ—¶é—´æ˜¾ç¤ºæ ¼å¼ï¼ˆç›¸å¯¹æ—¶é—´ã€å®Œæ•´æ—¶é—´ï¼‰

 * åœ¨åˆ—è¡¨ä¸­æ˜¾ç¤ºæ—¶é—´ä¿¡æ¯

      
        Note note = getItem(position);
        if (note != null) {
            TextView tvTitle = convertView.findViewById(android.R.id.text1);
            TextView tvTime = convertView.findViewById(R.id.text_timestamp);
            TextView tvContent = convertView.findViewById(R.id.text_content);
            
            tvTitle.setText(note.getTitle());
            tvTime.setText(note.getRelativeModifyTime());
            
            // å†…å®¹é¢„è§ˆ
            String content = note.getContent();
            if (content.length() > 50) {
                content = content.substring(0, 50) + "...";
            }
            tvContent.setText(content);
            
            // æ ¹æ®æ—¶é—´æ˜¾ç¤ºä¸åŒçš„é¢œè‰²
            long now = System.currentTimeMillis();
            long diff = now - note.getModifyTime();
            
            if (diff < 3600000) { // 1å°æ—¶å†…
                tvTime.setTextColor(ContextCompat.getColor(context, R.color.colorRecent));
            } else if (diff < 86400000) { // 1å¤©å†…
                tvTime.setTextColor(ContextCompat.getColor(context, R.color.colorToday));
            } else {
                tvTime.setTextColor(ContextCompat.getColor(context, R.color.colorOlder));
            }
        }
        
        return convertView;

**å®ç°æ–¹æ¡ˆ**ï¼š

    
    public static String getRelativeTime(long timestamp) {
    long now = System.currentTimeMillis();
    long diff = now - timestamp;
    if (diff < 60000) return "åˆšåˆš";
    if (diff < 3600000) return (diff/60000) + "åˆ†é’Ÿå‰";
    if (diff < 86400000) return (diff/3600000) + "å°æ—¶å‰";
    if (diff < 604800000) {
        long days = diff/86400000;
        if (days == 1) return "æ˜¨å¤©";
        if (days == 2) return "å‰å¤©";
        return days + "å¤©å‰";
    }
    return new SimpleDateFormat("MM-dd HH:mm").format(new Date(timestamp));
    
**ä½¿ç”¨åœºæ™¯**ï¼š
- â±ï¸ ç¬”è®°è¯¦æƒ…æ˜¾ç¤ºå®Œæ•´æ—¶é—´ï¼ˆyyyy-MM-dd HH:mm:ssï¼‰
<img width="510" height="981" alt="ebe76ff86e55ad5fbbeb71362f4c5f0f" src="https://github.com/user-attachments/assets/fd2e8261-4b95-43bd-a864-a1adea17f3b7" />

## ğŸ” æœç´¢åŠŸèƒ½

**åŠŸèƒ½æè¿°**ï¼šæ”¯æŒæ ‡é¢˜å’Œå†…å®¹å…³é”®å­—å®æ—¶æœç´¢ï¼Œæå‡ç¬”è®°æŸ¥æ‰¾æ•ˆç‡

**åŠŸèƒ½ç‰¹æ€§**ï¼š
- âœ… å®æ—¶æœç´¢ï¼Œè¾“å…¥å³æ˜¾ç¤ºç»“æœ
- âœ… æ”¯æŒæ ‡é¢˜å’Œå†…å®¹åŒé‡æœç´¢
- âœ… è‡ªåŠ¨æ¸…ç†ï¼Œè¿”å›å®Œæ•´åˆ—è¡¨

### æœç´¢é€‚é…å™¨å®ç°
å®ç°å®æ—¶æœç´¢ï¼š

```java
/**
 * æ”¯æŒæœç´¢çš„ç¬”è®°é€‚é…å™¨
 * å®ç°å®æ—¶æœç´¢åŠŸèƒ½
 */
public class NoteSearchAdapter extends BaseAdapter implements Filterable {
    private static final String TAG = "NoteSearchAdapter";
    
    private Context context;
    private List<Note> originalData;
    private List<Note> filteredData;
    private ItemFilter filter = new ItemFilter();
    
    public NoteSearchAdapter(Context context, List<Note> data) {
        this.context = context;
        this.originalData = new ArrayList<>(data);
        this.filteredData = new ArrayList<>(data);
    }
    
    public int getCount() {
        return filteredData.size();
    }
    
    public Note getItem(int position) {
        return filteredData.get(position);
    }
    
    public long getItemId(int position) {
        return position;
    }
    
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
            convertView = LayoutInflater.from(context)
                .inflate(R.layout.noteslist_item, parent, false);
            holder = new ViewHolder();
            holder.title = convertView.findViewById(android.R.id.text1);
            holder.time = convertView.findViewById(R.id.text_timestamp);
            holder.content = convertView.findViewById(R.id.text_content);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        
        Note note = getItem(position);
        holder.title.setText(highlightSearchText(note.getTitle()));
        holder.time.setText(DateUtil.getRelativeTime(note.getModifyTime()));
        holder.content.setText(highlightSearchText(note.getContent()));
        
        return convertView;
    }
    
 
    
    /**
     * è‡ªå®šä¹‰è¿‡æ»¤å™¨
     */
    private class ItemFilter extends Filter {
        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            FilterResults results = new FilterResults();
            List<Note> filteredList = new ArrayList<>();
            
            if (constraint == null || constraint.length() == 0) {
                // å¦‚æœæ²¡æœ‰è¿‡æ»¤æ¡ä»¶ï¼Œè¿”å›å…¨éƒ¨æ•°æ®
                filteredList.addAll(originalData);
            } else {
                String filterPattern = constraint.toString().toLowerCase(Locale.getDefault()).trim();
                currentFilter = filterPattern;
                
                for (Note note : originalData) {
                    // æœç´¢æ ‡é¢˜å’Œå†…å®¹
                    if (note.getTitle().toLowerCase(Locale.getDefault()).contains(filterPattern) ||
                        note.getContent().toLowerCase(Locale.getDefault()).contains(filterPattern)) {
                        filteredList.add(note);
                    }
                }
            }
            
            results.values = filteredList;
            results.count = filteredList.size();
            return results;
        }
        
        @Override
        protected void publishResults(CharSequence constraint, FilterResults results) {
            filteredData = (List<Note>) results.values;
            
            if (results.count > 0) {
                notifyDataSetChanged();
            } else {
                notifyDataSetInvalidated();
            }
        }
    }
    
    static class ViewHolder {
        TextView title;
        TextView time;
        TextView content;
    }
}
```

### Activityä¸­æœç´¢åŠŸèƒ½é›†æˆ
```java
/**
 * æœç´¢Activity
 * å®ç°å®æ—¶æœç´¢åŠŸèƒ½
 */
public class SearchActivity extends AppCompatActivity {
    private static final String TAG = "SearchActivity";
    
    private EditText mSearchEditText;
    private ImageButton mBtnClearSearch;
    private ListView mListView;
    private NoteSearchAdapter mAdapter;
    private List<Note> mAllNotes = new ArrayList<>();
    private Handler mHandler = new Handler();
    private Runnable mSearchRunnable;
    
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_search);
        
        initViews();
        loadAllNotes();
        setupSearch();
    }
    
    private void initViews() {
        mSearchEditText = findViewById(R.id.et_search);
        mBtnClearSearch = findViewById(R.id.btn_clear_search);
        mListView = findViewById(R.id.lv_search_results);
        
        // æ¸…é™¤æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        mBtnClearSearch.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                mSearchEditText.setText("");
                mBtnClearSearch.setVisibility(View.GONE);
                performSearch(""); // æ¸…ç©ºæœç´¢
            }
        });
        
        // æœç´¢ç»“æœç‚¹å‡»äº‹ä»¶
        mListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                Note note = mAdapter.getItem(position);
                if (note != null) {
                    openNoteDetail(note);
                }
            }
        });
    }
    
    private void loadAllNotes() {
        new Thread(new Runnable() {
            @Override
            public void run() {
                List<Note> notes = DatabaseHelper.getInstance(SearchActivity.this).getAllNotes();
                runOnUiThread(new Runnable() {
                    @Override
                    public void run() {
                        mAllNotes.clear();
                        mAllNotes.addAll(notes);
                        mAdapter = new NoteSearchAdapter(SearchActivity.this, mAllNotes);
                        mListView.setAdapter(mAdapter);
                    }
                });
            }
        }).start();
    }
    
    private void setupSearch() {
        // æœç´¢æ¡†æ–‡æœ¬å˜åŒ–ç›‘å¬
        mSearchEditText.addTextChangedListener(new TextWatcher() {
            @Override
            public void beforeTextChanged(CharSequence s, int start, int count, int after) {}
            
            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                // æ˜¾ç¤º/éšè—æ¸…é™¤æŒ‰é’®
                mBtnClearSearch.setVisibility(s.length() > 0 ? View.VISIBLE : View.GONE);
                
                // å»¶è¿Ÿæœç´¢ï¼Œé¿å…é¢‘ç¹æŸ¥è¯¢
                mHandler.removeCallbacks(mSearchRunnable);
                mSearchRunnable = new Runnable() {
                    @Override
                    public void run() {
                        performSearch(s.toString());
                    }
                };
                mHandler.postDelayed(mSearchRunnable, 500); // 500msé˜²æŠ–
            }
            
            @Override
            public void afterTextChanged(Editable s) {}
        });
        
        // é”®ç›˜æœç´¢æŒ‰é’®ç›‘å¬
        mSearchEditText.setOnEditorActionListener(new TextView.OnEditorActionListener() {
            @Override
            public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
                if (actionId == EditorInfo.IME_ACTION_SEARCH) {
                    performSearch(v.getText().toString());
                    hideKeyboard();
                    return true;
                }
                return false;
            }
        });
    }
    
    private void performSearch(String query) {
        if (mAdapter != null) {
            mAdapter.getFilter().filter(query);
            
            // æ›´æ–°æœç´¢ç»“æœæ•°é‡æ˜¾ç¤º
            int count = mAdapter.getCount();
            updateSearchResultCount(count);
            
            // æ˜¾ç¤ºæ— ç»“æœæç¤º
            if (count == 0 && !TextUtils.isEmpty(query)) {
                showNoResultsMessage(query);
            }
        }
    }
    
    private void updateSearchResultCount(int count) {
        TextView resultCount = findViewById(R.id.tv_result_count);
        if (resultCount != null) {
            String text = "æ‰¾åˆ° " + count + " æ¡ç»“æœ";
            resultCount.setText(text);
            resultCount.setVisibility(count > 0 ? View.VISIBLE : View.GONE);
        }
    }
    
    private void showNoResultsMessage(String query) {
        TextView emptyView = (TextView) findViewById(R.id.tv_empty_view);
        if (emptyView != null) {
            emptyView.setText("æœªæ‰¾åˆ°åŒ…å« \"" + query + "\" çš„ç¬”è®°");
            emptyView.setVisibility(View.VISIBLE);
        } else {
            Toast.makeText(this, 
                "æœªæ‰¾åˆ°åŒ…å« \"" + query + "\" çš„ç¬”è®°", 
                Toast.LENGTH_SHORT).show();
        }
    }
    
    private void openNoteDetail(Note note) {
        Intent intent = new Intent(this, NoteDetailActivity.class);
        intent.putExtra("note_id", note.getId());
        startActivity(intent);
    }
    
    private void hideKeyboard() {
        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        if (imm != null && mSearchEditText != null) {
            imm.hideSoftInputFromWindow(mSearchEditText.getWindowToken(), 0);
        }
    }
}
```



### æœç´¢å¸ƒå±€æ–‡ä»¶
```xml
<!-- res/layout/activity_search.xml -->
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@color/white">
    
    <!-- æœç´¢æ  -->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:padding="12dp"
        android:background="@color/colorPrimary"
        android:elevation="4dp">
        
        <ImageButton
            android:id="@+id/btn_back"
            android:layout_width="48dp"
            android:layout_height="48dp"
            android:src="@drawable/ic_arrow_back"
            android:background="?attr/selectableItemBackgroundBorderless"
            android:contentDescription="@string/back"
            android:tint="@android:color/white"/>
        
        <EditText
            android:id="@+id/et_search"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:layout_marginStart="8dp"
            android:layout_marginEnd="8dp"
            android:hint="@string/search_hint"
            android:singleLine="true"
            android:imeOptions="actionSearch"
            android:inputType="text"
            android:maxLines="1"
            android:padding="12dp"
            android:background="@drawable/bg_search_edittext"
            android:textColor="@android:color/white"
            android:textColorHint="@color/white_60"/>
        
        <ImageButton
            android:id="@+id/btn_clear_search"
            android:layout_width="48dp"
            android:layout_height="48dp"
            android:src="@drawable/ic_close"
            android:background="?attr/selectableItemBackgroundBorderless"
            android:contentDescription="@string/clear"
            android:tint="@android:color/white"
            android:visibility="gone"/>
            
    </LinearLayout>
```



<img width="513" height="987" alt="dc5496b66a3a7a838918cd205ec20ceb" src="https://github.com/user-attachments/assets/a0d910c6-1060-40a9-ae72-54087effa53b" />



## ğŸ“ åˆ†ç±»ä¸æ’åºåŠŸèƒ½

**åŠŸèƒ½æè¿°**ï¼šæ”¯æŒç¬”è®°çš„æ™ºèƒ½åˆ†ç±»ç®¡ç†å’Œå¤šç§æ’åºæ–¹å¼ï¼Œæå‡ç¬”è®°ç®¡ç†æ•ˆç‡

**åŠŸèƒ½ç‰¹æ€§**ï¼š
- âœ… çµæ´»åˆ†ç±»ç®¡ç† - æ”¯æŒæ·»åŠ ã€åˆ é™¤ã€é‡å‘½ååˆ†ç±»
- âœ… æ™ºèƒ½åˆ†ç±»ç­›é€‰ - æŒ‰åˆ†ç±»å¿«é€Ÿç­›é€‰ç¬”è®°
- âœ… å¤šç»´åº¦æ’åº - æ”¯æŒæ—¶é—´ã€æ ‡é¢˜ã€ä¿®æ”¹æ—¶é—´ç­‰å¤šç§æ’åºæ–¹å¼
- âœ… åˆ†ç±»é¢œè‰²æ ‡è¯† - ä¸åŒåˆ†ç±»ä½¿ç”¨ä¸åŒé¢œè‰²æ ‡è¯†
- âœ… ç»Ÿè®¡åŠŸèƒ½ - æ˜¾ç¤ºæ¯ä¸ªåˆ†ç±»çš„ç¬”è®°æ•°é‡
- âœ… æŒä¹…åŒ–å­˜å‚¨ - åˆ†ç±»è®¾ç½®è‡ªåŠ¨ä¿å­˜

### åˆ†ç±»ç­›é€‰å®ç°
**åŠŸèƒ½æè¿°**ï¼šæ”¯æŒä¸ºç¬”è®°æ·»åŠ åˆ†ç±»æ ‡ç­¾ï¼Œå¹¶æŒ‰åˆ†ç±»ç­›é€‰ç¬”è®°

**å®ç°ä»£ç **ï¼š
```java
/**
 * åˆ†ç±»ç®¡ç†å™¨
 * è´Ÿè´£ç¬”è®°çš„åˆ†ç±»å’Œç­›é€‰
 */
public class CategoryManager {
    private static CategoryManager instance;
    private Context context;
    private SharedPreferences prefs;
    
    private static final String PREFS_CATEGORIES = "note_categories";
    private static final String DEFAULT_CATEGORIES = "å·¥ä½œ,ç”Ÿæ´»,å­¦ä¹ ,æƒ³æ³•,æ—…è¡Œ,ä¸ªäºº";
    
    public static synchronized CategoryManager getInstance(Context context) {
        if (instance == null) {
            instance = new CategoryManager(context.getApplicationContext());
        }
        return instance;
    }
    
    private CategoryManager(Context context) {
        this.context = context;
        this.prefs = context.getSharedPreferences(PREFS_CATEGORIES, Context.MODE_PRIVATE);
    }
    
    /**
     * è·å–æ‰€æœ‰åˆ†ç±»
     */
    public List<String> getAllCategories() {
        String categoriesStr = prefs.getString("categories", DEFAULT_CATEGORIES);
        String[] categories = categoriesStr.split(",");
        List<String> categoryList = new ArrayList<>();
        
        // æ·»åŠ "å…¨éƒ¨"é€‰é¡¹
        categoryList.add("å…¨éƒ¨");
        for (String category : categories) {
            if (!category.trim().isEmpty()) {
                categoryList.add(category.trim());
            }
        }
        
        return categoryList;
    }
    
    /**
     * æ·»åŠ æ–°åˆ†ç±»
     */
    public boolean addCategory(String category) {
        if (category == null || category.trim().isEmpty()) {
            return false;
        }
        
        String trimmedCategory = category.trim();
        List<String> categories = getAllCategories();
        
        // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨
        for (String c : categories) {
            if (c.equals(trimmedCategory)) {
                return false;
            }
        }
        
        // ä¿å­˜æ–°åˆ†ç±»
        categories.add(trimmedCategory);
        saveCategories(categories);
        return true;
    }
    
    /**
     * åˆ é™¤åˆ†ç±»
     */
    public boolean removeCategory(String category) {
        List<String> categories = getAllCategories();
        boolean removed = categories.remove(category);
        
        if (removed) {
            saveCategories(categories);
            
            // å°†è¯¥åˆ†ç±»ä¸‹çš„ç¬”è®°ç§»åˆ°"æœªåˆ†ç±»"
            moveNotesToDefault(category);
        }
        
        return removed;
    }
    
    /**
     * é‡å‘½ååˆ†ç±»
     */
    public boolean renameCategory(String oldName, String newName) {
        List<String> categories = getAllCategories();
        int index = categories.indexOf(oldName);
        
        if (index != -1) {
            categories.set(index, newName);
            saveCategories(categories);
            
            // æ›´æ–°ç¬”è®°çš„åˆ†ç±»
            updateNotesCategory(oldName, newName);
            return true;
        }
        
        return false;
    }
    
    /**
     * æŒ‰åˆ†ç±»ç­›é€‰ç¬”è®°
     */
    public List<Note> filterByCategory(String category, List<Note> allNotes) {
        if ("å…¨éƒ¨".equals(category)) {
            return allNotes;
        }
        
        List<Note> filteredNotes = new ArrayList<>();
        for (Note note : allNotes) {
            if (category.equals(note.getCategory())) {
                filteredNotes.add(note);
            }
        }
        return filteredNotes;
    }
    
    /**
     * è·å–åˆ†ç±»é¢œè‰²
     */
    public int getCategoryColor(String category) {
        int[] colors = context.getResources().getIntArray(R.array.category_colors);
        List<String> categories = getAllCategories();
        
        int index = categories.indexOf(category);
        if (index >= 0 && index < colors.length) {
            return colors[index % colors.length];
        }
        
        return Color.GRAY;
    }
    
    /**
     * è·å–åˆ†ç±»ç»Ÿè®¡
     */
    public Map<String, Integer> getCategoryStats(List<Note> allNotes) {
        Map<String, Integer> stats = new HashMap<>();
        
        for (Note note : allNotes) {
            String category = note.getCategory();
            if (category == null || category.isEmpty()) {
                category = "æœªåˆ†ç±»";
            }
            
            stats.put(category, stats.getOrDefault(category, 0) + 1);
        }
        
        return stats;
    }
    
    private void saveCategories(List<String> categories) {
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < categories.size(); i++) {
            if (i > 0) sb.append(",");
            sb.append(categories.get(i));
        }
        prefs.edit().putString("categories", sb.toString()).apply();
    }
    
    private void moveNotesToDefault(String oldCategory) {
        DatabaseHelper.getInstance(context)
            .updateNotesCategory(oldCategory, "æœªåˆ†ç±»");
    }
    
    private void updateNotesCategory(String oldName, String newName) {
        DatabaseHelper.getInstance(context)
            .updateNotesCategory(oldName, newName);
    }
}
```

### æ’åºåŠŸèƒ½å®ç°
**ğŸ”„ æ”¯æŒæŒ‰æ—¶é—´ã€å­—æ¯ã€é¢œè‰²æ’åºåŠŸèƒ½**

**å®ç°ä»£ç **ï¼š
```java
/**
 * æ’åºç®¡ç†å™¨
 * æ”¯æŒå¤šç§æ’åºæ–¹å¼
 */
public class SortManager {
    public enum SortBy {
        TIME_DESC,    // æ—¶é—´é™åºï¼ˆæœ€æ–°ï¼‰
        TIME_ASC,     // æ—¶é—´å‡åºï¼ˆæœ€æ—§ï¼‰
        TITLE_ASC,    // æ ‡é¢˜A-Z
        TITLE_DESC,   // æ ‡é¢˜Z-A
        MODIFY_DESC,  // ä¿®æ”¹æ—¶é—´é™åº
        MODIFY_ASC    // ä¿®æ”¹æ—¶é—´å‡åº
    }
    
    private static SortManager instance;
    private Context context;
    private SortBy currentSortBy = SortBy.MODIFY_DESC;
    
    public static synchronized SortManager getInstance(Context context) {
        if (instance == null) {
            instance = new SortManager(context.getApplicationContext());
        }
        return instance;
    }
    
    private SortManager(Context context) {
        this.context = context;
        loadSortPreference();
    }
    
    /**
     * è®¾ç½®æ’åºæ–¹å¼
     */
    public void setSortBy(SortBy sortBy) {
        this.currentSortBy = sortBy;
        saveSortPreference();
    }
    
    /**
     * è·å–å½“å‰æ’åºæ–¹å¼
     */
    public SortBy getCurrentSortBy() {
        return currentSortBy;
    }
    
    /**
     * è·å–æ’åºSQLè¯­å¥
     */
    public String getSortOrder() {
        switch (currentSortBy) {
            case TIME_DESC:
                return NotePad.Notes.COLUMN_NAME_CREATE_DATE + " DESC";
            case TIME_ASC:
                return NotePad.Notes.COLUMN_NAME_CREATE_DATE + " ASC";
            case TITLE_ASC:
                return NotePad.Notes.COLUMN_NAME_TITLE + " ASC";
            case TITLE_DESC:
                return NotePad.Notes.COLUMN_NAME_TITLE + " DESC";
            case MODIFY_DESC:
                return NotePad.Notes.COLUMN_NAME_MODIFICATION_DATE + " DESC";
            case MODIFY_ASC:
            default:
                return NotePad.Notes.COLUMN_NAME_MODIFICATION_DATE + " ASC";
        }
    }
    
    /**
     * å¯¹åˆ—è¡¨è¿›è¡Œæ’åº
     */
    public void sortNotes(List<Note> notes) {
        Collections.sort(notes, (note1, note2) -> {
            switch (currentSortBy) {
                case TIME_DESC:
                    return Long.compare(note2.getCreateTime(), note1.getCreateTime());
                case TIME_ASC:
                    return Long.compare(note1.getCreateTime(), note2.getCreateTime());
                case TITLE_ASC:
                    return note1.getTitle().compareToIgnoreCase(note2.getTitle());
                case TITLE_DESC:
                    return note2.getTitle().compareToIgnoreCase(note1.getTitle());
                case MODIFY_DESC:
                    return Long.compare(note2.getModifyTime(), note1.getModifyTime());
                case MODIFY_ASC:
                default:
                    return Long.compare(note1.getModifyTime(), note2.getModifyTime());
            }
        });
    }
    
    /**
     * æ˜¾ç¤ºæ’åºå¯¹è¯æ¡†
     */
    public void showSortDialog(Activity activity, OnSortSelectedListener listener) {
        AlertDialog.Builder builder = new AlertDialog.Builder(activity);
        builder.setTitle("æ’åºæ–¹å¼");
        
        String[] sortOptions = {
            "æŒ‰æ—¶é—´ï¼ˆæœ€æ–°ï¼‰",
            "æŒ‰æ—¶é—´ï¼ˆæœ€æ—©ï¼‰", 
            "æŒ‰æ ‡é¢˜ï¼ˆA-Zï¼‰",
            "æŒ‰æ ‡é¢˜ï¼ˆZ-Aï¼‰",
            "æŒ‰ä¿®æ”¹æ—¶é—´ï¼ˆæœ€æ–°ï¼‰",
            "æŒ‰ä¿®æ”¹æ—¶é—´ï¼ˆæœ€æ—©ï¼‰"
        };
        
        int selectedIndex = 4; // é»˜è®¤æŒ‰ä¿®æ”¹æ—¶é—´æœ€æ–°
        switch (currentSortBy) {
            case TIME_DESC: selectedIndex = 0; break;
            case TIME_ASC: selectedIndex = 1; break;
            case TITLE_ASC: selectedIndex = 2; break;
            case TITLE_DESC: selectedIndex = 3; break;
            case MODIFY_DESC: selectedIndex = 4; break;
            case MODIFY_ASC: selectedIndex = 5; break;
        }
        
        builder.setSingleChoiceItems(sortOptions, selectedIndex, (dialog, which) -> {
            SortBy newSortBy = SortBy.MODIFY_DESC;
            switch (which) {
                case 0: newSortBy = SortBy.TIME_DESC; break;
                case 1: newSortBy = SortBy.TIME_ASC; break;
                case 2: newSortBy = SortBy.TITLE_ASC; break;
                case 3: newSortBy = SortBy.TITLE_DESC; break;
                case 4: newSortBy = SortBy.MODIFY_DESC; break;
                case 5: newSortBy = SortBy.MODIFY_ASC; break;
            }
            
            setSortBy(newSortBy);
            if (listener != null) {
                listener.onSortSelected(newSortBy);
            }
            dialog.dismiss();
        });
        
        builder.setNegativeButton("å–æ¶ˆ", null);
        builder.show();
    }
    
    public interface OnSortSelectedListener {
        void onSortSelected(SortBy sortBy);
    }
    
    private void loadSortPreference() {
        SharedPreferences prefs = context.getSharedPreferences("sort_prefs", Context.MODE_PRIVATE);
        int sortIndex = prefs.getInt("sort_index", 4);
        
        switch (sortIndex) {
            case 0: currentSortBy = SortBy.TIME_DESC; break;
            case 1: currentSortBy = SortBy.TIME_ASC; break;
            case 2: currentSortBy = SortBy.TITLE_ASC; break;
            case 3: currentSortBy = SortBy.TITLE_DESC; break;
            case 4: currentSortBy = SortBy.MODIFY_DESC; break;
            case 5: currentSortBy = SortBy.MODIFY_ASC; break;
        }
    }
    
    private void saveSortPreference() {
        SharedPreferences prefs = context.getSharedPreferences("sort_prefs", Context.MODE_PRIVATE);
        int sortIndex = 4;
        switch (currentSortBy) {
            case TIME_DESC: sortIndex = 0; break;
            case TIME_ASC: sortIndex = 1; break;
            case TITLE_ASC: sortIndex = 2; break;
            case TITLE_DESC: sortIndex = 3; break;
            case MODIFY_DESC: sortIndex = 4; break;
            case MODIFY_ASC: sortIndex = 5; break;
        }
        prefs.edit().putInt("sort_index", sortIndex).apply();
    }
}
```

  <img width="515" height="975" alt="e32e69f2ff3b899e81855ab809d0c3a9" src="https://github.com/user-attachments/assets/24cfd850-b513-44fa-9701-e0b934d82628" />
**åˆ†ç±»é€‰é¡¹**ï¼š
- ğŸ“ å·¥ä½œ
- ğŸ  ç”Ÿæ´»
- ğŸ“š å­¦ä¹ 
- âœˆï¸ æ—…è¡Œ
- ğŸ’¡ æƒ³æ³•
- ğŸ›ï¸ è´­ç‰©
- ğŸ“¦ ç­‰ç­‰
<img width="513" height="986" alt="c1b9f471e11561d82af0c9148f264022" src="https://github.com/user-attachments/assets/0db7bb8e-c69e-481d-97bc-a5fa3efbe19b" />
**åˆ†ç±»é€‰é¡¹ï¼ˆé¢œè‰²ï¼‰**ï¼š
<img width="495" height="987" alt="c86740b5dbe4a252b9b414d4802cd8de" src="https://github.com/user-attachments/assets/b0122f38-9924-4d2e-97fc-23dc4bf59742" />

## ä¸‰. å…³é”®æŠ€æœ¯ç»†èŠ‚

## ğŸ—ï¸ æ•°æ®åº“è®¾è®¡

### æ•°æ®åº“æŸ¥è¯¢å®ç°
```java
// ç¬”è®°å†…å®¹æä¾›è€…ä¸­çš„æŸ¥è¯¢æ–¹æ³•å®ç°
@Override
public Cursor query(Uri uri, String[] projection, String selection,
                    String[] selectionArgs, String sortOrder) {
    SQLiteDatabase db = mOpenHelper.getReadableDatabase();
    SQLiteQueryBuilder qb = new SQLiteQueryBuilder();
    qb.setTables(NotePad.Notes.TABLE_NAME);
    
    Cursor c = qb.query(db, projection, selection, selectionArgs,
                        null, null, sortOrder);
    c.setNotificationUri(getContext().getContentResolver(), uri);
    return c;
}
```

### å†…å­˜ç®¡ç†
```java
public class WeakReferenceHandler extends Handler {
    private final WeakReference<Activity> mActivity;
    
    public WeakReferenceHandler(Activity activity) {
        mActivity = new WeakReference<>(activity);
    }
    
    @Override
    public void handleMessage(Message msg) {
        Activity activity = mActivity.get();
        if (activity != null && !activity.isFinishing()) {
            // å¤„ç†æ¶ˆæ¯é€»è¾‘...
        }
    }
}
```

### å®Œæ•´çš„æ•°æ®åº“æ“ä½œç±»ç¤ºä¾‹
```java
public class NoteDatabaseHelper extends SQLiteOpenHelper {
    private static final String DATABASE_NAME = "notes.db";
    private static final int DATABASE_VERSION = 1;
    
    public static final String TABLE_NOTES = "notes";
    public static final String COLUMN_ID = "_id";
    public static final String COLUMN_TITLE = "title";
    public static final String COLUMN_CONTENT = "content";
    public static final String COLUMN_CREATED = "created_date";
    public static final String COLUMN_MODIFIED = "modified_date";
    public static final String COLUMN_CATEGORY = "category";
    
    public NoteDatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }
    
    @Override
    public void onCreate(SQLiteDatabase db) {
        String CREATE_NOTES_TABLE = "CREATE TABLE " + TABLE_NOTES + "("
                + COLUMN_ID + " INTEGER PRIMARY KEY AUTOINCREMENT,"
                + COLUMN_TITLE + " TEXT NOT NULL,"
                + COLUMN_CONTENT + " TEXT,"
                + COLUMN_CREATED + " INTEGER NOT NULL,"
                + COLUMN_MODIFIED + " INTEGER NOT NULL,"
                + COLUMN_CATEGORY + " TEXT DEFAULT 'æœªåˆ†ç±»'"
                + ")";
        db.execSQL(CREATE_NOTES_TABLE);
    }
    
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_NOTES);
        onCreate(db);
    }
}
```

## å››. é¡¹ç›®äº®ç‚¹å’Œæ‰©å±•æ–¹å‘

### âœ¨ é¡¹ç›®äº®ç‚¹
| äº®ç‚¹ | æè¿° | ä¼˜åŠ¿ |
|------|------|------|
| ğŸ¯ **åŠŸèƒ½å®Œå¤‡** | å®Œæ•´çš„CRUDæ“ä½œ | è¦†ç›–ç¬”è®°åº”ç”¨æ‰€æœ‰åŸºç¡€åŠŸèƒ½ |
| âš¡ **æ€§èƒ½é«˜æ•ˆ** | ä¼˜åŒ–çš„æ•°æ®åº“æŸ¥è¯¢ | å¿«é€Ÿå“åº”ï¼Œæµç•…ä½“éªŒ |
| ğŸ”„ **å®æ—¶åŒæ­¥** | æœç´¢ã€æ’åºå®æ—¶æ›´æ–° | å³æ—¶åé¦ˆï¼Œæ“ä½œé¡ºæ»‘ |

### ğŸš€ æ‰©å±•æ–¹å‘
#### çŸ­æœŸè§„åˆ’
1. **ğŸ” ç¬”è®°åŠ å¯†**
   - AESåŠ å¯†å­˜å‚¨æ•æ„Ÿç¬”è®°
   - æŒ‡çº¹/é¢éƒ¨è¯†åˆ«è§£é”
   - å¯†ç ä¿æŠ¤åŠŸèƒ½

2. **â˜ï¸ äº‘åŒæ­¥åŠŸèƒ½**
   - å¤šè®¾å¤‡æ•°æ®åŒæ­¥
   - è‡ªåŠ¨å¤‡ä»½å’Œæ¢å¤
   - ç‰ˆæœ¬å†²çªè§£å†³

3. **ğŸ“¤ å¯¼å‡ºåŠŸèƒ½**
   - å¯¼å‡ºä¸ºPDF/Word/Text
   - æ‰¹é‡å¯¼å‡ºåŠŸèƒ½
   - åˆ†äº«åˆ°å…¶ä»–åº”ç”¨

#### ä¸­æœŸè§„åˆ’
1. **ğŸ“ å¯Œæ–‡æœ¬ç¼–è¾‘**
   - Markdownæ”¯æŒ
   - å›¾ç‰‡æ’å…¥å’Œç¼–è¾‘
   - è¡¨æ ¼å’Œåˆ—è¡¨æ”¯æŒ
   - ä»£ç é«˜äº®åŠŸèƒ½

2. **ğŸ§  æ™ºèƒ½åŠŸèƒ½**
   - è‡ªåŠ¨æ ‡ç­¾ç”Ÿæˆ
   - æ™ºèƒ½åˆ†ç±»å»ºè®®
   - å†…å®¹æ‘˜è¦ç”Ÿæˆ
   - æœç´¢å†å²åˆ†æ

3. **ğŸ‘¥ åä½œåŠŸèƒ½**
   - å¤šäººåä½œç¼–è¾‘
   - è¯„è®ºå’Œæ‰¹æ³¨
   - ç‰ˆæœ¬å†å²æŸ¥çœ‹
   - æƒé™ç®¡ç†

#### é•¿æœŸè§„åˆ’
1. **ğŸ¤– AIå¢å¼º**
   - æ™ºèƒ½å†…å®¹æ¨è
   - å†™ä½œåŠ©æ‰‹
   - è¯­éŸ³è½¬æ–‡å­—
   - å›¾ç‰‡æ–‡å­—è¯†åˆ«

2. **ğŸŒ è·¨å¹³å°æ”¯æŒ**
   - Webç‰ˆæœ¬
   - æ¡Œé¢å®¢æˆ·ç«¯
   - æµè§ˆå™¨æ’ä»¶
   - ç§»åŠ¨ç«¯ä¼˜åŒ–

3. **ğŸ”„ ç”Ÿæ€ç³»ç»Ÿ**
   - æ’ä»¶ç³»ç»Ÿ
   - APIå¼€æ”¾
   - ç¬¬ä¸‰æ–¹é›†æˆ
   - æ¨¡æ¿å¸‚åœº

